# This is a sample build configuration for Python.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Dockerhub as your build environment
image: enapiuz/ubuntu-postgres-python

pipelines:
  default:
    - step:
        script: # Modify the commands below to build your repository.
          - psql -c "CREATE USER moneypot WITH PASSWORD 'test';" -U postgres
          - psql -c "ALTER USER moneypot WITH SUPERUSER;" -U postgres
          - psql -c "CREATE DATABASE moneypot_dist;" -U postgres
          - psql -c "GRANT ALL PRIVILEGES ON DATABASE moneypot_dist to moneypot;" -U postgres
          - cp moneypot/settings/local-dist.py moneypot/settings/local.py
          - python manage.py syncdb --noinput
          - python manage.py migrate --noinput